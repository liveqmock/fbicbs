<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cbs.repository.code.dao.ActirtMapper">
    <resultMap id="BaseResultMap" type="cbs.repository.code.model.Actirt">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sun Nov 21 21:36:06 CST 2010.
        -->
        <result column="CURCDE" jdbcType="VARCHAR" property="curcde"/>
        <result column="IRTKD1" jdbcType="VARCHAR" property="irtkd1"/>
        <result column="IRTKD2" jdbcType="VARCHAR" property="irtkd2"/>
        <result column="EFFDAT" jdbcType="TIMESTAMP" property="effdat"/>
        <result column="IRTNAM" jdbcType="VARCHAR" property="irtnam"/>
        <result column="CURFLG" jdbcType="VARCHAR" property="curflg"/>
        <result column="MODFLG" jdbcType="VARCHAR" property="modflg"/>
        <result column="IRTVAL" jdbcType="DECIMAL" property="irtval"/>
        <result column="IRTSPH" jdbcType="DECIMAL" property="irtsph"/>
        <result column="IRTSPL" jdbcType="DECIMAL" property="irtspl"/>
        <result column="SPRFLG" jdbcType="VARCHAR" property="sprflg"/>
        <result column="CDFLAG" jdbcType="VARCHAR" property="cdflag"/>
        <result column="IRTTRM" jdbcType="DECIMAL" property="irttrm"/>
        <result column="TRMUNT" jdbcType="VARCHAR" property="trmunt"/>
        <result column="CRETLR" jdbcType="VARCHAR" property="cretlr"/>
        <result column="CREDAT" jdbcType="TIMESTAMP" property="credat"/>
        <result column="RECSTS" jdbcType="VARCHAR" property="recsts"/>
    </resultMap>
    <sql id="Example_Where_Clause">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sun Nov 21 21:36:06 CST 2010.
        -->
        <where>
            <foreach collection="oredCriteria" item="criteria" separator="or">
                <if test="criteria.valid">
                    <trim prefix="(" prefixOverrides="and" suffix=")">
                        <foreach collection="criteria.criteria" item="criterion">
                            <choose>
                                <when test="criterion.noValue">
                                    and ${criterion.condition}
                                </when>
                                <when test="criterion.singleValue">
                                    and ${criterion.condition} #{criterion.value}
                                </when>
                                <when test="criterion.betweenValue">
                                    and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                </when>
                                <when test="criterion.listValue">
                                    and ${criterion.condition}
                                    <foreach close=")" collection="criterion.value" item="listItem" open="("
                                             separator=",">
                                        #{listItem}
                                    </foreach>
                                </when>
                            </choose>
                        </foreach>
                    </trim>
                </if>
            </foreach>
        </where>
    </sql>
    <sql id="Update_By_Example_Where_Clause">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sun Nov 21 21:36:06 CST 2010.
        -->
        <where>
            <foreach collection="example.oredCriteria" item="criteria" separator="or">
                <if test="criteria.valid">
                    <trim prefix="(" prefixOverrides="and" suffix=")">
                        <foreach collection="criteria.criteria" item="criterion">
                            <choose>
                                <when test="criterion.noValue">
                                    and ${criterion.condition}
                                </when>
                                <when test="criterion.singleValue">
                                    and ${criterion.condition} #{criterion.value}
                                </when>
                                <when test="criterion.betweenValue">
                                    and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                </when>
                                <when test="criterion.listValue">
                                    and ${criterion.condition}
                                    <foreach close=")" collection="criterion.value" item="listItem" open="("
                                             separator=",">
                                        #{listItem}
                                    </foreach>
                                </when>
                            </choose>
                        </foreach>
                    </trim>
                </if>
            </foreach>
        </where>
    </sql>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sun Nov 21 21:36:06 CST 2010.
        -->
        CURCDE, IRTKD1, IRTKD2, EFFDAT, IRTNAM, CURFLG, MODFLG, IRTVAL, IRTSPH, IRTSPL, SPRFLG,
        CDFLAG, IRTTRM, TRMUNT, CRETLR, CREDAT, RECSTS
    </sql>
    <select id="selectByExample" parameterType="cbs.repository.code.model.ActirtExample" resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sun Nov 21 21:36:06 CST 2010.
        -->
        select
        <if test="distinct">
            distinct
        </if>
        <include refid="Base_Column_List"/>
        from ACTIRT
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
        <if test="orderByClause != null">
            order by ${orderByClause}
        </if>
    </select>
    <delete id="deleteByExample" parameterType="cbs.repository.code.model.ActirtExample">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sun Nov 21 21:36:06 CST 2010.
        -->
        delete from ACTIRT
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
    </delete>
    <insert id="insert" parameterType="cbs.repository.code.model.Actirt">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sun Nov 21 21:36:06 CST 2010.
        -->
        insert into ACTIRT (CURCDE, IRTKD1, IRTKD2,
        EFFDAT, IRTNAM, CURFLG,
        MODFLG, IRTVAL, IRTSPH,
        IRTSPL, SPRFLG, CDFLAG,
        IRTTRM, TRMUNT, CRETLR,
        CREDAT, RECSTS)
        values (#{curcde,jdbcType=VARCHAR}, #{irtkd1,jdbcType=VARCHAR}, #{irtkd2,jdbcType=VARCHAR},
        #{effdat,jdbcType=TIMESTAMP}, #{irtnam,jdbcType=VARCHAR}, #{curflg,jdbcType=VARCHAR},
        #{modflg,jdbcType=VARCHAR}, #{irtval,jdbcType=DECIMAL}, #{irtsph,jdbcType=DECIMAL},
        #{irtspl,jdbcType=DECIMAL}, #{sprflg,jdbcType=VARCHAR}, #{cdflag,jdbcType=VARCHAR},
        #{irttrm,jdbcType=DECIMAL}, #{trmunt,jdbcType=VARCHAR}, #{cretlr,jdbcType=VARCHAR},
        #{credat,jdbcType=TIMESTAMP}, #{recsts,jdbcType=VARCHAR})
    </insert>
    <insert id="insertSelective" parameterType="cbs.repository.code.model.Actirt">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sun Nov 21 21:36:06 CST 2010.
        -->
        insert into ACTIRT
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="curcde != null">
                CURCDE,
            </if>
            <if test="irtkd1 != null">
                IRTKD1,
            </if>
            <if test="irtkd2 != null">
                IRTKD2,
            </if>
            <if test="effdat != null">
                EFFDAT,
            </if>
            <if test="irtnam != null">
                IRTNAM,
            </if>
            <if test="curflg != null">
                CURFLG,
            </if>
            <if test="modflg != null">
                MODFLG,
            </if>
            <if test="irtval != null">
                IRTVAL,
            </if>
            <if test="irtsph != null">
                IRTSPH,
            </if>
            <if test="irtspl != null">
                IRTSPL,
            </if>
            <if test="sprflg != null">
                SPRFLG,
            </if>
            <if test="cdflag != null">
                CDFLAG,
            </if>
            <if test="irttrm != null">
                IRTTRM,
            </if>
            <if test="trmunt != null">
                TRMUNT,
            </if>
            <if test="cretlr != null">
                CRETLR,
            </if>
            <if test="credat != null">
                CREDAT,
            </if>
            <if test="recsts != null">
                RECSTS,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="curcde != null">
                #{curcde,jdbcType=VARCHAR},
            </if>
            <if test="irtkd1 != null">
                #{irtkd1,jdbcType=VARCHAR},
            </if>
            <if test="irtkd2 != null">
                #{irtkd2,jdbcType=VARCHAR},
            </if>
            <if test="effdat != null">
                #{effdat,jdbcType=TIMESTAMP},
            </if>
            <if test="irtnam != null">
                #{irtnam,jdbcType=VARCHAR},
            </if>
            <if test="curflg != null">
                #{curflg,jdbcType=VARCHAR},
            </if>
            <if test="modflg != null">
                #{modflg,jdbcType=VARCHAR},
            </if>
            <if test="irtval != null">
                #{irtval,jdbcType=DECIMAL},
            </if>
            <if test="irtsph != null">
                #{irtsph,jdbcType=DECIMAL},
            </if>
            <if test="irtspl != null">
                #{irtspl,jdbcType=DECIMAL},
            </if>
            <if test="sprflg != null">
                #{sprflg,jdbcType=VARCHAR},
            </if>
            <if test="cdflag != null">
                #{cdflag,jdbcType=VARCHAR},
            </if>
            <if test="irttrm != null">
                #{irttrm,jdbcType=DECIMAL},
            </if>
            <if test="trmunt != null">
                #{trmunt,jdbcType=VARCHAR},
            </if>
            <if test="cretlr != null">
                #{cretlr,jdbcType=VARCHAR},
            </if>
            <if test="credat != null">
                #{credat,jdbcType=TIMESTAMP},
            </if>
            <if test="recsts != null">
                #{recsts,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>
    <select id="countByExample" parameterType="cbs.repository.code.model.ActirtExample" resultType="java.lang.Integer">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sun Nov 21 21:36:06 CST 2010.
        -->
        select count(*) from ACTIRT
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
    </select>
    <update id="updateByExampleSelective" parameterType="map">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sun Nov 21 21:36:06 CST 2010.
        -->
        update ACTIRT
        <set>
            <if test="record.curcde != null">
                CURCDE = #{record.curcde,jdbcType=VARCHAR},
            </if>
            <if test="record.irtkd1 != null">
                IRTKD1 = #{record.irtkd1,jdbcType=VARCHAR},
            </if>
            <if test="record.irtkd2 != null">
                IRTKD2 = #{record.irtkd2,jdbcType=VARCHAR},
            </if>
            <if test="record.effdat != null">
                EFFDAT = #{record.effdat,jdbcType=TIMESTAMP},
            </if>
            <if test="record.irtnam != null">
                IRTNAM = #{record.irtnam,jdbcType=VARCHAR},
            </if>
            <if test="record.curflg != null">
                CURFLG = #{record.curflg,jdbcType=VARCHAR},
            </if>
            <if test="record.modflg != null">
                MODFLG = #{record.modflg,jdbcType=VARCHAR},
            </if>
            <if test="record.irtval != null">
                IRTVAL = #{record.irtval,jdbcType=DECIMAL},
            </if>
            <if test="record.irtsph != null">
                IRTSPH = #{record.irtsph,jdbcType=DECIMAL},
            </if>
            <if test="record.irtspl != null">
                IRTSPL = #{record.irtspl,jdbcType=DECIMAL},
            </if>
            <if test="record.sprflg != null">
                SPRFLG = #{record.sprflg,jdbcType=VARCHAR},
            </if>
            <if test="record.cdflag != null">
                CDFLAG = #{record.cdflag,jdbcType=VARCHAR},
            </if>
            <if test="record.irttrm != null">
                IRTTRM = #{record.irttrm,jdbcType=DECIMAL},
            </if>
            <if test="record.trmunt != null">
                TRMUNT = #{record.trmunt,jdbcType=VARCHAR},
            </if>
            <if test="record.cretlr != null">
                CRETLR = #{record.cretlr,jdbcType=VARCHAR},
            </if>
            <if test="record.credat != null">
                CREDAT = #{record.credat,jdbcType=TIMESTAMP},
            </if>
            <if test="record.recsts != null">
                RECSTS = #{record.recsts,jdbcType=VARCHAR},
            </if>
        </set>
        <if test="_parameter != null">
            <include refid="Update_By_Example_Where_Clause"/>
        </if>
    </update>
    <update id="updateByExample" parameterType="map">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Sun Nov 21 21:36:06 CST 2010.
        -->
        update ACTIRT
        set CURCDE = #{record.curcde,jdbcType=VARCHAR},
        IRTKD1 = #{record.irtkd1,jdbcType=VARCHAR},
        IRTKD2 = #{record.irtkd2,jdbcType=VARCHAR},
        EFFDAT = #{record.effdat,jdbcType=TIMESTAMP},
        IRTNAM = #{record.irtnam,jdbcType=VARCHAR},
        CURFLG = #{record.curflg,jdbcType=VARCHAR},
        MODFLG = #{record.modflg,jdbcType=VARCHAR},
        IRTVAL = #{record.irtval,jdbcType=DECIMAL},
        IRTSPH = #{record.irtsph,jdbcType=DECIMAL},
        IRTSPL = #{record.irtspl,jdbcType=DECIMAL},
        SPRFLG = #{record.sprflg,jdbcType=VARCHAR},
        CDFLAG = #{record.cdflag,jdbcType=VARCHAR},
        IRTTRM = #{record.irttrm,jdbcType=DECIMAL},
        TRMUNT = #{record.trmunt,jdbcType=VARCHAR},
        CRETLR = #{record.cretlr,jdbcType=VARCHAR},
        CREDAT = #{record.credat,jdbcType=TIMESTAMP},
        RECSTS = #{record.recsts,jdbcType=VARCHAR}
        <if test="_parameter != null">
            <include refid="Update_By_Example_Where_Clause"/>
        </if>
    </update>
    <select id="selectIrtByCondition" resultMap="BaseResultMap">
        <![CDATA[
        select CURCDE, irt.IRTKD1, irt.IRTKD2,EFFDAT, IRTNAM, CURFLG, MODFLG, IRTVAL, IRTSPH, IRTSPL, SPRFLG,
         CDFLAG, IRTTRM, TRMUNT, CRETLR, CREDAT, RECSTS
         from actirt irt
         join
        (
         select max(effdat) as max_effdat,irtkd1,irtkd2
         from actirt
         where to_char(effdat,'yyyy-MM-dd') <= #{effdat}
         group by irtkd1,irtkd2
         ) nowirt
         on irt.irtkd1 = nowirt.irtkd1
         and irt.irtkd2 = nowirt.irtkd2
         and irt.effdat = nowirt.max_effdat
         where trim(curcde) = trim(#{curcde})
         and recsts = ' '
         ]]>
        <if test="irtkd != null">
            and irt.irtkd1||irt.irtkd2 like CONCAT('%',CONCAT(trim(#{irtkd}),'%'))
        </if>
        <if test="irtnam != null">
            and irtnam like CONCAT('%',CONCAT(trim(#{irtnam}),'%'))
        </if>
        order by curcde,irtkd1,irtkd2
    </select>
</mapper>